{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "NX",
  "scopeName": "source.nx",
  "fileTypes": ["nx"],
  "patterns": [
    { "include": "#comments" },
    { "include": "#value-definition" },
    { "include": "#type-definition" },
    { "include": "#module-root-element" },
    { "include": "#text-raw-block" },
    { "include": "#text-typed-block" },
    { "include": "#text-plain-block" },
    { "include": "#elements-if" },
    { "include": "#elements-for" },
    { "include": "#value-if" },
    { "include": "#value-for" },
    { "include": "#tags" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#keywords-core" },
    { "include": "#types" },
    { "include": "#operators" },
    { "include": "#interpolation" },
    { "include": "#entities" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.block.html.nx",
          "begin": "<!--",
          "end": "-->",
          "patterns": [ { "include": "#comments" } ]
        },
        {
          "name": "comment.block.nx",
          "begin": "/\\*",
          "end": "\\*/",
          "patterns": [ { "include": "#comments" } ]
        },
        {
          "name": "comment.line.double-slash.nx",
          "match": "//.*$"
        }
      ]
    },
    "entities": {
      "patterns": [
        {
          "name": "constant.character.entity.nx",
          "match": "&(?:lt|gt|amp|quot|apos|lbrace|rbrace|nbsp);|&(?# generic)(?:#\\d+|#x[0-9A-Fa-f]+|[A-Za-z][A-Za-z0-9]+);"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.nx",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            { "include": "#entities" },
            { "include": "#interpolation" },
            { "name": "constant.character.escape.nx", "match": "\\\\[\\\\\"nrt]" }
          ]
        },
        {
          "name": "string.quoted.single.nx",
          "begin": "'",
          "end": "'",
          "patterns": [
            { "include": "#entities" },
            { "include": "#interpolation" },
            { "name": "constant.character.escape.nx", "match": "\\\\[\\\\'nrt]" }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        { "name": "constant.numeric.hex.nx", "match": "(?:0x|0X)[0-9A-Fa-f](?:_?[0-9A-Fa-f])*" },
        { "name": "constant.numeric.float.nx", "match": "(?:[0-9](?:_?[0-9])*)(?:\\.(?:[0-9](?:_?[0-9])*)?)(?:[eE][+-]?(?:[0-9](?:_?[0-9])*))?" },
        { "name": "constant.numeric.float.nx", "match": "(?:[0-9](?:_?[0-9])*)(?:[eE][+-]?(?:[0-9](?:_?[0-9])*))" },
        { "name": "constant.numeric.integer.nx", "match": "[0-9](?:_?[0-9])*" }
      ]
    },
    "keywords-core": {
      "patterns": [
        { "name": "keyword.control.import.nx", "match": "\\bimport\\b" },
        { "name": "keyword.declaration.type.nx", "match": "\\b(?:type|enum)\\b" },
        { "name": "keyword.declaration.let.nx", "match": "\\blet\\b" },
        { "name": "keyword.other.raw.nx", "match": "\\braw\\b" },
        { "name": "constant.language.boolean.nx", "match": "\\b(?:true|false)\\b" },
        { "name": "constant.language.null.nx", "match": "\\bnull\\b" }
      ]
    },
    "keywords-control": {
      "patterns": [
        { "name": "keyword.control.conditional.nx", "match": "\\bif\\b|\\belse\\b" },
        { "name": "keyword.control.match.nx", "match": "\\bis\\b" },
        { "name": "keyword.control.loop.nx", "match": "\\bfor\\b|\\bin\\b" }
      ]
    },
    "types": {
      "patterns": [
        {
          "name": "storage.type.primitive.nx",
          "match": "\\b(?:string|i32|i64|int|f32|f64|float|bool|void|object)\\b"
        },
        {
          "name": "keyword.operator.type-modifier.nx",
          "match": "\\[\\]"
        }
      ]
    },
    "operators": {
      "patterns": [
        { "name": "keyword.operator.arrow.nx", "match": "=>" },
        { "name": "keyword.operator.arithmetic.nx", "match": "\\+|-|\\*|/|%" },
        { "name": "keyword.operator.comparison.nx", "match": "<=|>=|==|!=|<|>" },
        { "name": "keyword.operator.logical.nx", "match": "&&|\\|\\|" },
        { "name": "keyword.operator.logical.nx", "match": "!(?![=])" },
        { "name": "punctuation.separator.enum.nx", "match": "\\|" },
        { "name": "keyword.operator.conditional.nx", "match": "\\?" },
        { "name": "punctuation.separator.conditional.nx", "match": ":" },
        { "name": "punctuation.separator.dot.nx", "match": "\\." },
        { "name": "keyword.operator.assignment.nx", "match": "=" }
      ]
    },
    "value-definition": {
      "begin": "^(\\s*)(let)\\s+(?!<)([A-Za-z_][A-Za-z0-9_]*)",
      "beginCaptures": {
        "2": { "name": "keyword.declaration.let.nx" },
        "3": { "name": "entity.name.variable.nx" }
      },
      "end": "(?==)",
      "name": "meta.definition.value.nx",
      "patterns": [
        { "name": "punctuation.separator.type.annotation.nx", "match": ":" },
        {
          "name": "entity.name.type.nx",
          "match": "(?<=:)\\s*(?!string\\b|i32\\b|i64\\b|int\\b|f32\\b|f64\\b|float\\b|bool\\b|void\\b|object\\b)[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_]*)*"
        },
        { "include": "#types" },
        { "include": "#qualifiers" },
        { "include": "#operators" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#numbers" },
        { "include": "#strings" },
        { "include": "#comments" }
      ]
    },
    "type-definition": {
      "patterns": [
        {
          "name": "meta.definition.type.record.nx",
          "begin": "^(\\s*)(type)\\s+([A-Za-z_][A-Za-z0-9_]*)\\s*(=)\\s*(\\{)",
          "beginCaptures": {
            "2": { "name": "keyword.declaration.type.nx" },
            "3": { "name": "entity.name.type.nx" },
            "4": { "name": "keyword.operator.assignment.nx" },
            "5": { "name": "punctuation.section.block.begin.nx" }
          },
          "end": "\\}",
          "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
          "patterns": [
            { "include": "#record-body" }
          ]
        },
        {
          "name": "meta.definition.type.alias.nx",
          "match": "^(\\s*)(type)\\s+([A-Za-z_][A-Za-z0-9_]*)\\s*(=)(?!\\s*\\{)",
          "captures": {
            "2": { "name": "keyword.declaration.type.nx" },
            "3": { "name": "entity.name.type.nx" },
            "4": { "name": "keyword.operator.assignment.nx" }
          }
        }
      ]
    },
    "record-body": {
      "patterns": [
        { "include": "#record-property" },
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#value-if" },
        { "include": "#value-for" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        { "include": "#interpolation" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#operators" },
        { "include": "#qualifiers" },
        {
          "begin": "\\{",
          "beginCaptures": { "0": { "name": "punctuation.section.block.begin.nx" } },
          "end": "\\}",
          "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
          "patterns": [
            { "include": "#record-body" }
          ]
        }
      ]
    },
    "record-property": {
      "patterns": [
        {
          "begin": "\\b([A-Za-z_][A-Za-z0-9_-]*)\\s*(:)",
          "beginCaptures": {
            "1": { "name": "variable.other.property.nx" },
            "2": { "name": "punctuation.separator.type.annotation.nx" }
          },
          "end": "(?=\\s*[A-Za-z_][A-Za-z0-9_-]*\\s*:|\\s*\\})",
          "patterns": [
            {
              "name": "entity.name.type.nx",
              "match": "\\G\\s*(?!string\\b|i32\\b|i64\\b|int\\b|f32\\b|f64\\b|float\\b|bool\\b|void\\b|object\\b)[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_]*)*"
            },
            { "include": "#strings" },
            { "include": "#numbers" },
            { "include": "#value-if" },
            { "include": "#value-for" },
            { "include": "#elements-if" },
            { "include": "#elements-for" },
            { "include": "#tags" },
            { "include": "#interpolation" },
            { "include": "#keywords-core" },
            { "include": "#keywords-control" },
            { "include": "#types" },
            { "include": "#operators" },
            { "include": "#qualifiers" },
            { "include": "#comments" }
          ]
        }
      ]
    },
    "qualifiers": {
      "patterns": [
        {
          "name": "entity.name.qualifier.nx",
          "match": "[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*"
        }
      ]
    },
    "interpolation": {
      "begin": "(?<!\\\\)\\{",
      "beginCaptures": { "0": { "name": "punctuation.section.interpolation.begin.nx" } },
      "end": "\\}",
      "endCaptures": { "0": { "name": "punctuation.section.interpolation.end.nx" } },
      "name": "meta.interpolation.nx",
      "patterns": [
        { "include": "#tags" },
        { "include": "#value-if" },
        { "include": "#value-for" },
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#operators" },
        { "include": "#qualifiers" }
      ]
    },
    "embed-interpolation": {
      "begin": "(?<!\\\\)@\\{",
      "beginCaptures": { "0": { "name": "punctuation.section.interpolation.begin.nx" } },
      "end": "\\}",
      "endCaptures": { "0": { "name": "punctuation.section.interpolation.end.nx" } },
      "name": "meta.interpolation.nx",
      "patterns": [
        { "include": "#value-if" },
        { "include": "#value-for" },
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#operators" },
        { "include": "#qualifiers" }
      ]
    },
    "attr-value": {
      "patterns": [
        { "include": "#strings" },
        { "include": "#interpolation" },
        { "include": "#tags" },
        { "include": "#numbers" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#operators" }
      ]
    },
    "attr-name": {
      "name": "entity.other.attribute-name.nx",
      "match": "[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*"
    },
    "module-root-element": {
      "begin": "^(?=<[A-Za-z_])",
      "end": "(?=\\s*$)",
      "name": "meta.module.root-element.nx",
      "patterns": [
        { "include": "#tags" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#interpolation" },
        { "include": "#strings" },
        { "include": "#entities" },
        { "include": "#comments" }
      ]
    },
    "tags": {
      "patterns": [
        { "include": "#text-raw-block" },
        { "include": "#text-typed-block" },
        { "include": "#text-plain-block" },
        { "include": "#fragment" },
        { "include": "#end-tag" },
        { "include": "#start-tag" }
      ]
    },
    "text-raw-block": {
      "begin": "<([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)\\s*(:)\\s*(?:([A-Za-z_][A-Za-z0-9_-]*))?\\s*(raw)\\b",
      "beginCaptures": {
        "0": { "name": "meta.tag.start.nx" },
        "1": { "name": "entity.name.tag.nx" },
        "2": { "name": "support.type.text.nx" },
        "3": { "name": "support.type.text.nx" },
        "4": { "name": "keyword.other.raw.nx" }
      },
      "end": "</([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)>",
      "endCaptures": {
        "0": { "name": "meta.tag.end.nx" },
        "1": { "name": "entity.name.tag.nx" }
      },
      "name": "meta.text.raw.nx",
      "patterns": [
        { "name": "meta.tag.start.nx", "match": "\\s+" },
        { "include": "#attributes" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#numbers" },
        { "include": "#strings" },
        { "include": "#comments" },
        { "name": "punctuation.definition.tag.end.nx", "match": ">" },
        { "name": "meta.text.raw.content.nx", "match": "[^<]+" }
      ]
    },
    "text-typed-block": {
      "begin": "<([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)\\s*(:)\\s*([A-Za-z_][A-Za-z0-9_-]*)\\b(?!\\s*=)(?!\\s*raw\\b)",
      "beginCaptures": {
        "0": { "name": "meta.tag.start.nx" },
        "1": { "name": "entity.name.tag.nx" },
        "2": { "name": "support.type.text.nx" },
        "3": { "name": "support.type.text.nx" }
      },
      "end": "</([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)>",
      "endCaptures": {
        "0": { "name": "meta.tag.end.nx" },
        "1": { "name": "entity.name.tag.nx" }
      },
      "name": "meta.text.typed.nx",
      "patterns": [
        { "name": "meta.tag.start.nx", "match": "\\s+" },
        { "include": "#attributes" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#numbers" },
        { "include": "#strings" },
        { "include": "#comments" },
        { "name": "punctuation.definition.tag.end.nx", "match": ">" },
        { "include": "#embed-interpolation" },
        { "name": "constant.character.escape.nx", "match": "\\\\[@{}]" },
        { "include": "#entities" },
        { "name": "meta.text.typed.content.nx", "match": "[^@<\\\\{}]+" },
        { "name": "meta.text.typed.content.nx", "match": "@(?!(\\{))" },
        { "name": "meta.text.typed.content.nx", "match": "\\\\" }
      ]
    },
    "text-plain-block": {
      "begin": "<([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)\\s*(:)(?!\\s*raw\\b)(?!\\s*[A-Za-z_][A-Za-z0-9_-]*\\b(?!\\s*=))",
      "beginCaptures": {
        "0": { "name": "meta.tag.start.nx" },
        "1": { "name": "entity.name.tag.nx" },
        "2": { "name": "support.type.text.nx" }
      },
      "end": "</([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)>",
      "endCaptures": {
        "0": { "name": "meta.tag.end.nx" },
        "1": { "name": "entity.name.tag.nx" }
      },
      "name": "meta.text.plain.nx",
      "patterns": [
        { "name": "meta.tag.start.nx", "match": "\\s+" },
        { "include": "#attributes" },
        { "include": "#keywords-core" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#numbers" },
        { "include": "#strings" },
        { "include": "#comments" },
        { "name": "punctuation.definition.tag.end.nx", "match": ">" },
        { "include": "#text-child-element" },
        { "include": "#interpolation" },
        { "name": "constant.character.escape.nx", "match": "\\\\[{}]" },
        { "include": "#entities" },
        { "name": "meta.text.plain.content.nx", "match": "[^<&{\\\\]+" },
        { "name": "meta.text.plain.content.nx", "match": "\\\\" }
      ]
    },
    "fragment": {
      "begin": "<>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.nx" }
      },
      "end": "</>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.nx" }
      },
      "name": "meta.tag.fragment.nx",
      "patterns": [
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        { "include": "#interpolation" },
        { "include": "#strings" },
        { "include": "#entities" }
      ]
    },
    "end-tag": {
      "begin": "</",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.nx" }
      },
      "end": ">",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.nx" }
      },
      "name": "meta.tag.end.nx",
      "patterns": [
        {
          "name": "entity.name.tag.nx",
          "match": "[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*"
        }
      ]
    },
    "start-tag": {
      "begin": "<(?=[A-Za-z_:])",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.nx" }
      },
      "end": ">",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.nx" }
      },
      "name": "meta.tag.start.nx",
      "patterns": [
        {
          "name": "entity.name.tag.nx",
          "match": "\\G[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*"
        },
        {
          "name": "support.type.text.nx",
          "match": ":\\s*(?:(?!(?:raw|if)\\b)(?:[A-Za-z_][A-Za-z0-9_-]*)(?!\\s*=))?"
        },
        {
          "name": "keyword.other.raw.nx",
          "match": "\\braw\\b"
        },
        { "include": "#attributes" },
        {
          "name": "punctuation.definition.tag.self-closing.nx",
          "match": "/(?=\\s*>)"
        }
      ]
    },
    "attributes": {
      "patterns": [
        { "include": "#property-list-if" },
        {
          "name": "meta.attribute.nx",
          "match": "\\.\\.\\.[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*"
        },
        { "include": "#keywords-core" },
        {
          "begin": "(?=[A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*\\s*=)",
          "end": "(?=\n|[/>])",
          "patterns": [
            { "include": "#keywords-control" },
            { "include": "#attr-name" },
            { "name": "keyword.operator.assignment.nx", "match": "=" },
            { "include": "#attr-value" }
          ]
        }
      ]
    },

    "elements-if": {
      "begin": "(?:(?<=^|\\n|\\}|>)[ \\t]*|(?<=\\belse\\s+))(if)\\b",
      "beginCaptures": { "1": { "name": "keyword.control.conditional.nx" } },
      "end": "(?<=\\})(?!\\s*else\\b)",
      "name": "meta.control.if.elements.nx",
      "patterns": [
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        { "include": "#value-if" },
        { "include": "#value-for" },
        {
          "begin": "\\{",
          "beginCaptures": { "0": { "name": "punctuation.section.block.begin.nx" } },
          "end": "\\}",
          "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
          "patterns": [
            { "include": "#comments" },
            { "include": "#strings" },
            { "include": "#numbers" },
            { "include": "#elements-if" },
            { "include": "#elements-for" },
            { "include": "#tags" },
            { "include": "#value-if" },
            { "include": "#value-for" },
            { "include": "#interpolation" },
            { "include": "#keywords-control" },
            { "include": "#types" },
            { "include": "#operators" }
          ]
        },
        { "include": "#interpolation" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#operators" }
      ]
    },
    "value-if": {
      "begin": "(?<![A-Za-z0-9_])(if)\\b",
      "beginCaptures": { "1": { "name": "keyword.control.conditional.nx" } },
      "end": "(?<=\\})(?!\\s*else\\b)",
      "name": "meta.control.if.value.nx",
      "patterns": [
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#value-if" },
        { "include": "#value-for" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        {
          "begin": "\\{",
          "beginCaptures": { "0": { "name": "punctuation.section.block.begin.nx" } },
          "end": "\\}",
          "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
          "patterns": [
            { "include": "#comments" },
            { "include": "#strings" },
            { "include": "#numbers" },
            { "include": "#value-if" },
            { "include": "#value-for" },
            { "include": "#elements-if" },
            { "include": "#elements-for" },
            { "include": "#tags" },
            { "include": "#interpolation" },
            { "include": "#keywords-control" },
            { "include": "#types" },
            { "include": "#operators" }
          ]
        },
        { "include": "#interpolation" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#operators" }
      ]
    },
    "elements-for": {
      "begin": "(?<=^|\\n|\\}|>)[ \\t]*(for)\\b",
      "beginCaptures": { "1": { "name": "keyword.control.loop.nx" } },
      "end": "\\}",
      "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
      "name": "meta.control.loop.elements.nx",
      "patterns": [
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        {
          "begin": "\\{",
          "beginCaptures": { "0": { "name": "punctuation.section.block.begin.nx" } },
          "end": "(?=\\})",
          "patterns": [
            { "include": "#comments" },
            { "include": "#strings" },
            { "include": "#numbers" },
            { "include": "#elements-if" },
            { "include": "#elements-for" },
            { "include": "#tags" },
            { "include": "#interpolation" },
            { "include": "#types" },
            { "include": "#operators" }
          ]
        },
        { "include": "#interpolation" },
        { "include": "#types" },
        { "include": "#operators" },
        { "name": "keyword.control.loop.nx", "match": "\\bin\\b" }
      ]
    },
    "value-for": {
      "begin": "(?<![A-Za-z0-9_])(for)\\b",
      "beginCaptures": { "1": { "name": "keyword.control.loop.nx" } },
      "end": "\\}",
      "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
      "name": "meta.control.loop.value.nx",
      "patterns": [
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#value-if" },
        { "include": "#value-for" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        {
          "begin": "\\{",
          "beginCaptures": { "0": { "name": "punctuation.section.block.begin.nx" } },
          "end": "(?=\\})",
          "patterns": [
            { "include": "#comments" },
            { "include": "#strings" },
            { "include": "#numbers" },
            { "include": "#value-if" },
            { "include": "#value-for" },
            { "include": "#elements-if" },
            { "include": "#elements-for" },
            { "include": "#tags" },
            { "include": "#interpolation" },
            { "include": "#types" },
            { "include": "#operators" }
          ]
        },
        { "include": "#interpolation" },
        { "include": "#types" },
        { "include": "#operators" },
        { "name": "keyword.control.loop.nx", "match": "\\bin\\b" }
      ]
    },

    "text-child-element": {
      "patterns": [
        {
          "comment": "Self-closing child element inside text content with optional attributes",
          "begin": "(<)([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)\\b(?=[^>]*/>)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.tag.begin.nx" },
            "2": { "name": "entity.name.tag.nx" }
          },
          "end": "(/)(>)",
          "endCaptures": {
            "1": { "name": "punctuation.definition.tag.self-closing.nx" },
            "2": { "name": "punctuation.definition.tag.end.nx" }
          },
          "name": "meta.text.child-element.self-closing.nx",
          "patterns": [
            {
              "name": "entity.other.attribute-name.nx",
              "match": "[A-Za-z_][A-Za-z0-9_-]*(?=\\s*=)"
            },
            { "name": "keyword.operator.assignment.nx", "match": "=" },
            { "include": "#strings" },
            { "include": "#interpolation" }
          ]
        },
        {
          "comment": "Paired child element inside text content with content",
          "begin": "(<)([A-Za-z_][A-Za-z0-9_]*(?:\\.[A-Za-z_][A-Za-z0-9_-]*)*)\\b",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.tag.begin.nx" },
            "2": { "name": "entity.name.tag.nx" }
          },
          "end": "(</)(\\2)(>)",
          "endCaptures": {
            "1": { "name": "punctuation.definition.tag.begin.nx" },
            "2": { "name": "entity.name.tag.nx" },
            "3": { "name": "punctuation.definition.tag.end.nx" }
          },
          "name": "meta.text.child-element.nx",
          "patterns": [
            {
              "comment": "Inside the opening tag - attributes before >",
              "begin": "\\G(?!>)",
              "end": ">",
              "endCaptures": {
                "0": { "name": "punctuation.definition.tag.end.nx" }
              },
              "patterns": [
                {
                  "name": "entity.other.attribute-name.nx",
                  "match": "[A-Za-z_][A-Za-z0-9_-]*(?=\\s*=)"
                },
                { "name": "keyword.operator.assignment.nx", "match": "=" },
                { "include": "#strings" },
                { "include": "#interpolation" }
              ]
            },
            { "include": "#text-child-element" },
            { "include": "#interpolation" },
            { "name": "constant.character.escape.nx", "match": "\\\\[{}]" },
            { "include": "#entities" },
            { "name": "meta.text.plain.content.nx", "match": "[^<&{\\\\]+" },
            { "name": "meta.text.plain.content.nx", "match": "\\\\" }
          ]
        }
      ]
    },

    "property-list-if": {
      "begin": "(?<![A-Za-z0-9_])(if)\\b",
      "beginCaptures": { "1": { "name": "keyword.control.conditional.nx" } },
      "end": "(?<=\\})(?!\\s*else\\b)",
      "name": "meta.control.if.properties.nx",
      "patterns": [
        { "include": "#comments" },
        { "include": "#strings" },
        { "include": "#numbers" },
        { "include": "#value-if" },
        { "include": "#value-for" },
        { "include": "#elements-if" },
        { "include": "#elements-for" },
        { "include": "#tags" },
        {
          "begin": "\\{",
          "beginCaptures": { "0": { "name": "punctuation.section.block.begin.nx" } },
          "end": "\\}",
          "endCaptures": { "0": { "name": "punctuation.section.block.end.nx" } },
          "patterns": [
            { "include": "#comments" },
            { "include": "#strings" },
            { "include": "#numbers" },
            { "include": "#value-if" },
            { "include": "#value-for" },
            { "include": "#elements-if" },
            { "include": "#elements-for" },
            { "include": "#tags" },
            { "include": "#attributes" },
            { "include": "#interpolation" },
            { "include": "#keywords-control" },
            { "include": "#types" },
            { "include": "#operators" }
          ]
        },
        { "include": "#interpolation" },
        { "include": "#keywords-control" },
        { "include": "#types" },
        { "include": "#operators" }
      ]
    }
  }
}
